<div class="main-content">
  <!-- Main View -->
  <div class="manage-inventory-container" *ngIf="currentView === 'main'">
    <!-- Header -->
    <div class="page-header">
      <h2><i class="material-icons">inventory_2</i> Manage Inventory</h2>
      <p class="subtitle">Chọn loại inventory để quản lý</p>
    </div>

    <!-- Inventory Options Grid -->
    <div class="inventory-grid">
      <!-- RM1 Button -->
      <div class="inventory-card rm1-card" (click)="goToRM1()">
        <div class="card-icon">
          <i class="material-icons">inventory</i>
        </div>
        <div class="card-content">
          <h3>RM1</h3>
          <p>Raw Materials - ASM1</p>
          <span class="card-subtitle">Quản lý nguyên vật liệu nhà máy 1</span>
        </div>
        <div class="card-arrow">
          <i class="material-icons">arrow_forward</i>
        </div>
      </div>

      <!-- RM2 Button -->
      <div class="inventory-card rm2-card" (click)="goToRM2()">
        <div class="card-icon">
          <i class="material-icons">inventory</i>
        </div>
        <div class="card-content">
          <h3>RM2</h3>
          <p>Raw Materials - ASM2</p>
          <span class="card-subtitle">Quản lý nguyên vật liệu nhà máy 2</span>
        </div>
        <div class="card-arrow">
          <i class="material-icons">arrow_forward</i>
        </div>
      </div>

      <!-- FG1 Button -->
      <div class="inventory-card fg1-card" (click)="goToFG1()">
        <div class="card-icon">
          <i class="material-icons">check_circle_outline</i>
        </div>
        <div class="card-content">
          <h3>FG1</h3>
          <p>Finished Goods - ASM1</p>
          <span class="card-subtitle">Quản lý thành phẩm nhà máy 1</span>
        </div>
        <div class="card-arrow">
          <i class="material-icons">arrow_forward</i>
        </div>
      </div>

      <!-- FG2 Button -->
      <div class="inventory-card fg2-card" (click)="goToFG2()">
        <div class="card-icon">
          <i class="material-icons">check_circle_outline</i>
        </div>
        <div class="card-content">
          <h3>FG2</h3>
          <p>Finished Goods - ASM2</p>
          <span class="card-subtitle">Quản lý thành phẩm nhà máy 2</span>
        </div>
        <div class="card-arrow">
          <i class="material-icons">arrow_forward</i>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stats-header">
        <h3><i class="material-icons">analytics</i> Quick Overview</h3>
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number">RM1</div>
          <div class="stat-label">Raw Materials ASM1</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">RM2</div>
          <div class="stat-label">Raw Materials ASM2</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">FG1</div>
          <div class="stat-label">Finished Goods ASM1</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">FG2</div>
          <div class="stat-label">Finished Goods ASM2</div>
        </div>
      </div>
    </div>
  </div>

  <!-- RM1 View -->
  <div class="rm1-container" *ngIf="currentView === 'rm1'">
    <!-- Header with Back Button -->
    <div class="rm1-header">
      <button class="back-btn" (click)="backToMain()">
        <i class="material-icons">arrow_back</i>
        Quay lại
      </button>
      <h2><i class="material-icons">inventory</i> RM1 - Raw Materials ASM1</h2>
    </div>

    <!-- Action Bar -->
    <div class="action-bar">
      <div class="action-group">
        <button class="action-btn primary-btn">
          <i class="material-icons">add</i>
          Thêm mới
        </button>
        <button class="action-btn">
          <i class="material-icons">edit</i>
          Chỉnh sửa
        </button>
        <button class="action-btn">
          <i class="material-icons">delete</i>
          Xóa
        </button>
      </div>

      <!-- More Button with Dropdown -->
      <div class="more-dropdown">
        <button class="more-btn" (click)="toggleMoreDropdown()">
          <i class="material-icons">more_vert</i>
          More
        </button>
        <div class="dropdown-menu" [class.show]="showMoreDropdown">
          <div class="dropdown-item" (click)="triggerERPImport()">
            <i class="material-icons">file_upload</i>
            Import tồn kho ERP
          </div>
          <div class="dropdown-item" (click)="downloadERPTemplate()">
            <i class="material-icons">file_download</i>
            Tải Template import ERP
          </div>
          <div class="dropdown-item">
            <i class="material-icons">assessment</i>
            Báo cáo tồn kho
          </div>
          <div class="dropdown-item">
            <i class="material-icons">sync</i>
            Đồng bộ dữ liệu
          </div>
        </div>
      </div>

      <!-- Hidden File Input for ERP Import -->
      <input type="file" 
             #erpFileInput 
             accept=".xlsx,.xls,.csv" 
             style="display: none" 
             (change)="importERPInventory($event)">
    </div>

    <!-- Inventory Table -->
    <div class="inventory-table-container">
      <div class="table-header">
        <h3>Danh sách tồn kho RM1</h3>
        <div class="table-actions">
          <input type="text" placeholder="Tìm kiếm..." class="search-input">
          <button class="filter-btn">
            <i class="material-icons">filter_list</i>
            Lọc
          </button>
        </div>
      </div>

      <div class="table-content">
        <table class="inventory-table">
          <thead>
            <tr>
              <th>Mã hàng</th>
              <th>Nhà máy</th>
              <th>Số lượng hiện tại</th>
              <th>Đơn vị</th>
              <th>Vị trí</th>
              <th>Trạng thái</th>
              <th>Thao tác</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of inventoryData">
              <td>{{ item.materialCode }}</td>
              <td>{{ item.factory || 'ASM1' }}</td>
              <td>{{ item.quantity }}</td>
              <td>PCS</td>
              <td>A-01-01</td>
              <td>
                <span class="status-badge active">Hoạt động</span>
              </td>
              <td>
                <button class="action-btn small">
                  <i class="material-icons">edit</i>
                </button>
                <button class="action-btn small">
                  <i class="material-icons">delete</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
