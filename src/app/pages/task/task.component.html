<div class="main-content">
  <div class="container-fluid">
    <div class="board-toolbar">
      <h2 class="board-title">Project Tasks</h2>
      <button class="btn btn-primary" (click)="openAddModal()">
        <i class="material-icons">add</i> New Task
      </button>
    </div>

    <div class="task-board" cdkDropListGroup>
      <!-- To Do Column -->
      <div class="task-column">
        <div class="column-header todo-header">
          <h3>To Do</h3>
          <span class="task-count">{{todo.length}}</span>
        </div>
        <div class="task-list"
             id="todo"
             cdkDropList
             [cdkDropListData]="todo"
             (cdkDropListDropped)="drop($event)">
          <div class="task-card" *ngFor="let item of todo" cdkDrag>
            <div class="task-priority" [ngClass]="item.priority"></div>
            <div class="task-content">
              <h4>{{ item.title }}</h4>
              <p>{{ item.description }}</p>
            </div>
            <button class="delete-task-btn" (click)="deleteTask(item.id)">
              <i class="material-icons">delete_outline</i>
            </button>
          </div>
          <div *ngIf="todo.length === 0" class="empty-list-msg">Drop tasks here</div>
        </div>
      </div>

      <!-- In Progress Column -->
      <div class="task-column">
        <div class="column-header in-progress-header">
          <h3>In Progress</h3>
           <span class="task-count">{{inProgress.length}}</span>
        </div>
        <div class="task-list"
             id="in-progress"
             cdkDropList
             [cdkDropListData]="inProgress"
             (cdkDropListDropped)="drop($event)">
          <div class="task-card" *ngFor="let item of inProgress" cdkDrag>
            <div class="task-priority" [ngClass]="item.priority"></div>
            <div class="task-content">
              <h4>{{ item.title }}</h4>
              <p>{{ item.description }}</p>
            </div>
             <button class="delete-task-btn" (click)="deleteTask(item.id)">
              <i class="material-icons">delete_outline</i>
            </button>
          </div>
           <div *ngIf="inProgress.length === 0" class="empty-list-msg">Drop tasks here</div>
        </div>
      </div>

      <!-- Done Column -->
      <div class="task-column">
        <div class="column-header done-header">
          <h3>Done</h3>
           <span class="task-count">{{done.length}}</span>
        </div>
        <div class="task-list"
             id="done"
             cdkDropList
             [cdkDropListData]="done"
             (cdkDropListDropped)="drop($event)">
          <div class="task-card" *ngFor="let item of done" cdkDrag>
            <div class="task-priority" [ngClass]="item.priority"></div>
            <div class="task-content">
              <h4>{{ item.title }}</h4>
              <p>{{ item.description }}</p>
            </div>
             <button class="delete-task-btn" (click)="deleteTask(item.id)">
              <i class="material-icons">delete_outline</i>
            </button>
          </div>
           <div *ngIf="done.length === 0" class="empty-list-msg">Drop tasks here</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Task Modal -->
<div class="modal-overlay" *ngIf="showAddModal" (click)="closeAddModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3 class="modal-title">Create New Task</h3>
    <form (ngSubmit)="addTask()">
      <div class="form-group">
        <label for="task-title">Title</label>
        <input id="task-title" type="text" class="form-control" [(ngModel)]="newTask.title" name="title" required>
      </div>
      <div class="form-group">
        <label for="task-desc">Description</label>
        <textarea id="task-desc" class="form-control" [(ngModel)]="newTask.description" name="description"></textarea>
      </div>
      <div class="form-group">
        <label for="task-priority">Priority</label>
        <select id="task-priority" class="form-control" [(ngModel)]="newTask.priority" name="priority">
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
        </select>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn btn-secondary" (click)="closeAddModal()">Cancel</button>
        <button type="submit" class="btn btn-primary">Create Task</button>
      </div>
    </form>
  </div>
</div> 